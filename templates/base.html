<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/static/css/styles.css" type="text/css" />

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <!--<link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css" media="screen,projection" />-->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.1/css/materialize.min.css" type="text/css" />
     <!--Needs to be before jquery in script-->
     <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
    <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>-->
        <script type="text/javascript" src= "https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>

    <title>Recipes</title>
</head>

<body>
    
<header>

<!--https://materializecss.com/navbar.html-->
    <nav>
        <div class="nav-wrapper">
            <a href="/" class="brand-logo">Recipe Wiki</a>
                  <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>

            <ul id="nav-mobile" class="right hide-on-med-and-down ">
                <li><a href="/">Search</a></li>
                <li><a href="/addrecipe">Add Recipe</a></li>
                <li><a href="/visualizedata">Visualize Data</a></li>
                {% if current_user.is_authenticated %}
                <li><a href="/userpage/{{ current_user.id}}">{{ current_user.username[0] }}'s Profile</a></li>
                <li><a href="/logout">Logout</a> </li>
                {% else %}
                <li><a href="/login">Login</a></li>
                <li><a href="/register">Register</a></li>
                {% endif %}
            </ul>
        </div>
    </nav>
    
 

<!--https://materializecss.com/navbar.html-->
  <ul class="sidenav" id="mobile-demo">
 <li><a href="/">Search</a></li>
                <li><a href="/addrecipe">Add Recipe</a></li>
                <li><a href="/visualizedata">Visualize Data</a></li>
                {% if current_user.is_authenticated %}
                <li><a href="/userpage/{{ current_user.id}}">{{ current_user.username[0] }}'s Profile</a></li>
                <li><a href="/logout">Logout</a> </li>
                {% else %}
                <li><a href="/login">Login</a></li>
                <li><a href="/register">Register</a></li>
                {% endif %}
  </ul>
          
</header>
       

    {% block content %} {% endblock %}

  


    <script type="text/javascript">
    
    //loads materializecss functionality 
        $(document).ready(function() {
            //requred for select form
                $('select').formSelect().isMultiple;
            //required for sidenav
                    $('.sidenav').sidenav();
                    
                    //required for character limit
                        $('input#input_text, textarea#blurb').characterCounter();
                    $('#username').characterCounter()
                    
                    //required for collapsible
                        $('.collapsible').collapsible();

                    //requred for tabs:
                        $('.tabs').tabs();

  });
  
   

 function addOrRemoveCategory(){

            let categoryCount = 0;
            
            // for edit page
            // adjusts count reflect existing forms
            for (let i= 1; i < 15; i++){
                if ($(`#category-${i}`).length > 0){
                    categoryCount = i;
                }
            }
            
            
            $("#add-category").click(function() {
                $(`#category-${categoryCount}`).after(`
                 <input type="text" name="category-${++categoryCount}" id="category-${categoryCount}" class="autocomplete categoriesAutocomplete">
                `)
                autocompleteFunction();
            });
             $("#remove-category").click(function() {
                 if (categoryCount > 0){
                $(`#category-${categoryCount}`).remove();
                categoryCount--;
                 }
            });
                
                
 }
 
            
function addOrRemoveIngredient(){
            let ingredientCount = 0;
           for (let i= 0; i < 15; i++){
                if ($(`#ingredient-${i}`).length > 0){
                    ingredientCount = i;
                }
            }

            $("#add-ingredient").click(function() {
                $(".ingredient-btn-row").before(`
                    <div class="row ingredient-row-${++ingredientCount}">
                         <div class="input-field col s4">
                            <label for="quantity">Quantity</label>
                            <input type="text" name="quantity-${ingredientCount}" id="quantity-${ingredientCount}" >
                    </div>
                    <div class="input-field col s4">
                        <label for="ingredient">Ingredient</label>
                        <input type="text" name="ingredient-${ingredientCount}" id="ingredient-${ingredientCount}" class="autocomplete ingredientsAutocomplete">
                    </div>
                    
                  </div>
                `)
                autocompleteFunction();
            });
            
                  $("#add-filter-ingredient").click(function() {
                $(this).before(`
              <div class="row ingredient-row-${++ingredientCount}">
                    <div class="input-field col s12">
                        <label for="ingredient">Ingredient</label>
                        <input type="text" name="ingredient-${ingredientCount}" id="ingredient-${ingredientCount}" class="autocomplete ingredientsAutocomplete">
                    </div>
                    
                  </div>
                `)
                autocompleteFunction();
            });

            $("#remove-ingredient").click(function() {
                if (ingredientCount > 0){
                $(`.ingredient-row-${ingredientCount}`).remove();
                ingredientCount--;
                }
            });
            
}

function addOrRemoveInstruction(){

            let instructionCount = 1;
            
             for (let i= 1; i < 15; i++){
                if ($(`#instruction-${i}`).length > 0){
                    instructionCount = i;
                }
            }

            $("#add-instruction").click(function() {
                $(".instruction-btn-row").before(`  <div class = "row instruction-row-${++instructionCount}"><li>
                    <div class="instruction-input-field col s10">
                        <textarea id="instruction-${instructionCount}" name= "instruction-${instructionCount}" class="materialize-textarea"></textarea>
                    </div>

            </li></row>`)
            });

            $("#remove-instruction").click(function() {
                if (instructionCount > 1){
                $(`.instruction-row-${instructionCount--}`).remove();
                }
            });


}

addOrRemoveCategory();
addOrRemoveIngredient();
addOrRemoveInstruction();
       

        // $(document).add()
  
    </script>
</body>

</html>
