 {% extends 'base.html' %} {% block content %}
 
 <!--from: http://flask.pocoo.org/docs/1.0/patterns/flashing/-->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

 
<h1 class="center-align">Add Recipe</h1>
<form method="POST" id="add-recipe" enctype="multipart/form-data">
    <div class="row">
        <label for="recipe-name">Recipe Name*</label>
        <input type="text" name="recipe-name" id="recipe-name" placeholder="FlambÃ©ed chicken with asparagus" required>
    </div>
    <div class="row">
        <label for="recipe-img">Recipe Image</label>
        <input type="file" name="recipe-img" id="recipe-img" accept="image/*">
    </div>
    <div class="row">
        <div class="input-field col s6">
            <select class="difficulty-select" name="difficulty-select">
      <option value="0" selected>Easy</option>
      <option value="1">Normal</option>
      <option value="2">Challenging</option>
    </select>
            <label>Difficulty</label>
        </div>


        <div class="input-field col s6">
            <input id="serves" name="serves" type="number" required>
            <label>Serves*</label>
        </div>

    </div>


    <div class="row">
        <div class="input-field col s8 m4">
            <label for="categories">Categories*</label>
            <input type="text" name="category-0" id="category-0" class="autocomplete categoriesAutocomplete" placeholder="Mexican, Vegetarian" required>

        </div>
    </div>
    <div class="row categories-btn-row btn-row">
        <a class="btn-floating btn-small waves-effect waves-light red" id="add-category"><i class="material-icons">add</i></a>
        <a class="btn-floating btn-small waves-effect waves-light red" id="remove-category"><i class="material-icons">remove</i></a>
    </div>

    <div class="row">
        <div class="input-field col s12">
            <textarea id="blurb" name="blurb" class="materialize-textarea" data-length="100" placeholder="A sentence or two about your dish(max 100 chars)"></textarea>
            <label for="blurb">Blurb</label>
        </div>
    </div>

    <div class="row">
        <div class="input-field col s6">
            <input id="prep-hours" name="prep-hours" class="col s4" type="number" placeholder="Hours*" required>
            <input id="prep-mins" name="prep-mins" type="number" max="59" class="col s4 offset-s1" placeholder="Minutes">
            <label>Preparation Time</label>
        </div>
        <div class="input-field col s6">
            <input id="cook-hours" name="cook-hours" class="col s4" type="number" placeholder="Hours*" required>
            <input id="cook-mins" name="cook-mins" class="col s4 offset-s1" type="number" max="59" placeholder="Minutes" >
            <label>Cooking Time</label>
        </div>
    </div>


    <h6>Ingredients:*</h6>
    <div class="row ingredient-row-0">
        <div class="input-field col s4">
            <label for="quantity">Quantity</label>
            <input type="text" name="quantity-0" id="quantity-0" placeholder="1/2 Teaspoon" required>
        </div>
        <div class="input-field col s4">
            <label for="ingredient">Ingredient</label>
            <input type="text" name="ingredient-0" id="ingredient-0" class="autocomplete ingredientsAutocomplete" placeholder="Honey" required>
        </div>
    </div>
    <div class="row ingredient-btn-row btn-row">
        <a class="btn-floating btn-small waves-effect waves-light red" id="add-ingredient"><i class="material-icons">add</i></a>
        <a class="btn-floating btn-small waves-effect waves-light red" id="remove-ingredient"><i class="material-icons">remove</i></a>
    </div>

    <h6>Instructions:*</h6>
    <ol>
        <div class="row instruction-row-1">
            <li>
                <div class="instruction-input-field col s10">
                    <textarea id="instruction-1" name="instruction-1" class="materialize-textarea" required> </textarea>
                </div>
            </li>
        </div>
        <div class="row instruction-btn-row btn-row">
            <a class="btn-floating btn-small waves-effect waves-light red" id="add-instruction"><i class="material-icons">add</i></a>
            <a class="btn-floating btn-small waves-effect waves-light red" id="remove-instruction"><i class="material-icons">remove</i></a>
        </div>
    </ol>

    <p class="required-explanation">*Required field</p>

    <button class="btn waves-effect waves-light submit-btn" type="submit">Submit <i class="material-icons right">send</i></button>


</form>
 
<script>

    function autocompleteFunction(){
            
        $('input.categoriesAutocomplete').autocomplete({
            data: {
              {% for category in categories %}  "{{ category }}": null, {% endfor %}
            },

        });
        
        
         $('input.ingredientsAutocomplete').autocomplete({
            data: {
              {% for ingredient in ingredients %}  "{{ ingredient }}": null, {% endfor %}
            },

        });
    }
    
        $(document).ready(function() {
            autocompleteFunction()
    });
</script>


{% endblock %}